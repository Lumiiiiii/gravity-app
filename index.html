<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon Arcade</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&family=Press+Start+2P&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="app-container">
        <!-- HEADER -->
        <header class="main-header">
            <h1 class="logo">NEON <span class="highlight">ARCADE</span></h1>
            <p class="subtitle">Seleziona un gioco per iniziare</p>
        </header>

        <!-- MODE SELECTION MODAL -->
        <div id="mode-modal" class="mode-modal hidden">
            <div class="mode-content">
                <h2>Scegli Modalit√†</h2>
                <p id="mode-game-title">Gioco</p>
                <button onclick="startGameWithMode('pve')">üë§ vs ü§ñ (CPU)</button>
                <button onclick="startGameWithMode('pvp')">üë§ vs üë§ (2 Giocatori)</button>
                <button class="close-mode" onclick="closeModeModal()">Annulla</button>
            </div>
        </div>

        <!-- PLAYER SETUP MODAL -->
        <div id="player-setup-modal" class="mode-modal hidden">
            <div class="mode-content setup-content">
                <h2>Configurazione Giocatori</h2>

                <div class="player-config">
                    <h3>Giocatore 1</h3>
                    <input type="text" id="p1-name" placeholder="Nome Giocatore 1" value="Player 1">
                    <div class="color-picker-container">
                        <label>Colore:</label>
                        <input type="color" id="p1-color" value="#ef4444">
                    </div>
                </div>

                <div class="player-config">
                    <h3>Giocatore 2</h3>
                    <input type="text" id="p2-name" placeholder="Nome Giocatore 2" value="Player 2">
                    <div class="color-picker-container">
                        <label>Colore:</label>
                        <input type="color" id="p2-color" value="#eab308">
                    </div>
                </div>

                <button onclick="confirmPlayerSetup()">Inizia Partita</button>
                <button class="close-mode" onclick="closeSetupModal()">Indietro</button>
            </div>
        </div>

        <!-- DASHBOARD (Game Selection) -->
        <main id="game-hub" class="game-hub visible">
            <div class="game-card" onclick="openGame('tris')">
                <div class="icon">‚ùå‚≠ï</div>
                <h2>Tris</h2>
                <p>La sfida classica</p>
            </div>
            <div class="game-card" onclick="openModeSelection('memory', 'Memory')">
                <div class="icon">üé¥</div>
                <h2>Memory</h2>
                <p>Allena la mente</p>
            </div>
            <div class="game-card" onclick="openModeSelection('rps', 'Sasso Carta Forbice')">
                <div class="icon">‚úÇÔ∏è</div>
                <h2>Sasso Carta Forbice</h2>
                <p>Sfida il computer</p>
            </div>
            <div class="game-card" onclick="openModeSelection('mole', 'Acchiappa la Talpa')">
                <div class="icon">üî®</div>
                <h2>Acchiappa la Talpa</h2>
                <p>Riflessi rapidi</p>
            </div>
            <div class="game-card" onclick="openModeSelection('connect4', 'Forza 4')">
                <div class="icon">üî¥üü°</div>
                <h2>Forza 4</h2>
                <p>Strategia pura</p>
            </div>
            <div class="game-card" onclick="openGame('clicker')">
                <div class="icon">üëÜ</div>
                <h2>Neon Clicker</h2>
                <p>Guadagna Coins</p>
            </div>
        </main>

        <!-- GAME CONTAINERS -->
        <section id="game-container" class="game-container hidden">
            <button class="back-btn" onclick="closeGame()">‚Üê Torna alla Home</button>

            <!-- TRIS -->
            <div id="game-tris" class="game-view hidden">
                <h2>Tris</h2>
                <div class="tris-board" id="tris-board"></div>
                <div class="game-info">
                    <span id="tris-status">Tocca a te!</span>
                    <button class="restart-btn" onclick="resetTris()">Riavvia</button>
                </div>
            </div>

            <!-- MEMORY -->
            <div id="game-memory" class="game-view hidden">
                <h2>Memory</h2>
                <div class="memory-grid" id="memory-grid"></div>
                <div class="game-info">
                    <span>Mosse: <span id="memory-moves">0</span></span>
                    <button class="restart-btn" onclick="initMemory()">Nuova Partita</button>
                </div>
            </div>

            <!-- RPS -->
            <div id="game-rps" class="game-view hidden">
                <h2>Sasso Carta Forbice</h2>
                <div class="rps-arena">
                    <div class="player-side">
                        <span class="emoji" id="player-choice">‚ùî</span>
                        <p>Tu</p>
                    </div>
                    <div class="vs">VS</div>
                    <div class="cpu-side">
                        <span class="emoji" id="cpu-choice">‚ùî</span>
                        <p>CPU</p>
                    </div>
                </div>
                <div class="rps-controls">
                    <button onclick="playRPS('sasso')">‚úä</button>
                    <button onclick="playRPS('carta')">‚úã</button>
                    <button onclick="playRPS('forbice')">‚úåÔ∏è</button>
                </div>
                <p id="rps-result" class="result-text">Fai la tua mossa!</p>
            </div>

            <!-- MOLE -->
            <div id="game-mole" class="game-view hidden">
                <h2>Acchiappa la Talpa</h2>
                <div class="game-info">
                    <h3 id="mole-turn-msg"></h3>
                </div>
                <div class="mole-grid" id="mole-grid">
                    <!-- 9 holes generated via JS or static -->
                    <div class="hole" id="hole-0"></div>
                    <div class="hole" id="hole-1"></div>
                    <div class="hole" id="hole-2"></div>
                    <div class="hole" id="hole-3"></div>
                    <div class="hole" id="hole-4"></div>
                    <div class="hole" id="hole-5"></div>
                    <div class="hole" id="hole-6"></div>
                    <div class="hole" id="hole-7"></div>
                    <div class="hole" id="hole-8"></div>
                </div>
                <div class="game-info">
                    <span>Punteggio: <span id="mole-score">0</span></span>
                    <span>Tempo: <span id="mole-time">30</span>s</span>
                    <button class="restart-btn" onclick="startMole()">Start</button>
                </div>
            </div>

            <!-- CONNECT 4 -->
            <div id="game-connect4" class="game-view hidden">
                <h2>Forza 4</h2>
                <div id="c4-board" class="c4-board"></div>
                <div class="game-info">
                    <span id="c4-status">Tocca a: ROSSO</span>
                    <button class="restart-btn" onclick="initConnect4()">Riavvia</button>
                </div>
            </div>

            <!-- CLICKER -->
            <div id="game-clicker" class="game-view hidden">
                <h2>Neon Clicker</h2>

                <div class="clicker-layout">
                    <!-- Left: Click Area -->
                    <div id="clicker-area" class="clicker-area">
                        <div class="score-display">
                            <span class="coin-icon">ü™ô</span>
                            <span id="clicker-score">0</span>
                        </div>
                        <button id="click-target" class="click-target" onclick="clickTarget(event)">
                            ‚ö°
                        </button>
                    </div>

                    <!-- Right: Shop -->
                    <div class="clicker-shop">
                        <h3>Potenziamenti</h3>

                        <div class="shop-item">
                            <div class="shop-info">
                                <h4>Click Power</h4>
                                <p>Livello attuale: <span id="click-power-val">1</span></p>
                            </div>
                            <button id="btn-buy-power" onclick="buyUpgrade('power')">
                                Costo: <span id="cost-power">20</span>
                            </button>
                        </div>

                        <div class="shop-item">
                            <div class="shop-info">
                                <h4>Auto Clicker</h4>
                                <p>Livello attuale: <span id="auto-click-val">0</span></p>
                            </div>
                            <button id="btn-buy-auto" onclick="buyUpgrade('auto')">
                                Costo: <span id="cost-auto">50</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- SCRIPTS -->
    <script src="script.js"></script>
    <script src="js/tris.js"></script>
    <script src="js/memory.js"></script>
    <script src="js/rps.js"></script>
    <script src="js/mole.js"></script>
    <script src="js/connect4.js"></script>
    <script src="js/clicker.js"></script>
</body>

</html>